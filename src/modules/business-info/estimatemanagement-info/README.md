# ê²¬ì ê´€ë¦¬ (Estimate Management)

## ğŸ“‹ ê°œìš”

ê²¬ì ê´€ë¦¬ ëª¨ë“ˆì€ ê³ ê°ì—ê²Œ ì œí’ˆ ê²¬ì ì„ ìƒì„±, ê´€ë¦¬, ì¶”ì í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ê²¬ì ì˜ ìƒì„±ë¶€í„° ìŠ¹ì¸ê¹Œì§€ ì „ ê³¼ì •ì„ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ë©°, ì„¸ë¶€í’ˆëª©ë³„ ìƒì„¸ ê²¬ì ê³¼ ì—‘ì…€ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

### ì£¼ìš” íŠ¹ì§•
- ğŸ” **ê²¬ì  ìƒì„± ë° ê´€ë¦¬** - ê²¬ì  ì½”ë“œ ìë™ ìƒì„±, ë²„ì „ ê´€ë¦¬
- ğŸ“Š **ì„¸ë¶€í’ˆëª© ê´€ë¦¬** - ê²¬ì ë³„ ìƒì„¸ í’ˆëª© ë° ê°€ê²© ê´€ë¦¬
- ğŸ“ˆ **ê²¬ì  ìƒíƒœ ì¶”ì ** - ê²¬ì ì¤‘, ê²¬ì ì™„ë£Œ, ìŠ¹ì¸ëŒ€ê¸°, ìŠ¹ì¸ì™„ë£Œ, ê±°ì ˆ
- ğŸ“ **ì—‘ì…€ ì—°ë™** - ê²¬ì  ë°ì´í„° ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ, í…œí”Œë¦¿ ì œê³µ
- ğŸ” **ê¶Œí•œ ê´€ë¦¬** - ê²¬ì  ìƒì„±/ìˆ˜ì •/ì‚­ì œ ê¶Œí•œ ì œì–´
- ğŸ“ **ìƒì„¸ ë¡œê¹…** - ëª¨ë“  ê²¬ì  ê´€ë ¨ í™œë™ ì¶”ì 

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥

### ê²¬ì  ê´€ë¦¬
- âœ… **ê²¬ì  ìƒì„±** - ê²¬ì  ê¸°ë³¸ ì •ë³´ ë° ì„¸ë¶€í’ˆëª© ë™ì‹œ ë“±ë¡
- âœ… **ê²¬ì  ì¡°íšŒ** - ê²¬ì  ëª©ë¡, ìƒì„¸ ì¡°íšŒ, ê²€ìƒ‰ ë° í•„í„°ë§
- âœ… **ê²¬ì  ìˆ˜ì •** - ê²¬ì  ì •ë³´ ë° ì„¸ë¶€í’ˆëª© ìˆ˜ì •
- âœ… **ê²¬ì  ì‚­ì œ** - ê²¬ì  ì‚­ì œ ë° ë³µì› ê¸°ëŠ¥
- âœ… **ê²¬ì  ìƒíƒœ ê´€ë¦¬** - ê²¬ì  ì§„í–‰ ìƒíƒœ ë³€ê²½

### ì„¸ë¶€í’ˆëª© ê´€ë¦¬
- âœ… **ì„¸ë¶€í’ˆëª© ë“±ë¡** - ê²¬ì ë³„ ìƒì„¸ í’ˆëª© ì •ë³´ ë“±ë¡
- âœ… **ì„¸ë¶€í’ˆëª© ìˆ˜ì •** - í’ˆëª©ë³„ ìˆ˜ëŸ‰, ë‹¨ê°€, ì´ê°€ê²© ìˆ˜ì •
- âœ… **ì„¸ë¶€í’ˆëª© ì‚­ì œ** - ë¶ˆí•„ìš”í•œ í’ˆëª© ì œê±°
- âœ… **ìë™ ê³„ì‚°** - ìˆ˜ëŸ‰ Ã— ë‹¨ê°€ = ì´ê°€ê²© ìë™ ê³„ì‚°

### ì—‘ì…€ ì—°ë™
- âœ… **ê²¬ì  ì—…ë¡œë“œ** - ì—‘ì…€ íŒŒì¼ë¡œ ê²¬ì  ë°ì´í„° ì¼ê´„ ë“±ë¡
- âœ… **ê²¬ì  ë‹¤ìš´ë¡œë“œ** - ê²¬ì  ë°ì´í„°ë¥¼ ì—‘ì…€ íŒŒì¼ë¡œ ë‚´ë³´ë‚´ê¸°
- âœ… **í…œí”Œë¦¿ ì œê³µ** - ê²¬ì  ë“±ë¡ìš© ì—‘ì…€ í…œí”Œë¦¿ ë‹¤ìš´ë¡œë“œ
- âœ… **ë°ì´í„° ê²€ì¦** - ì—…ë¡œë“œ ì‹œ ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬

## ğŸ“ ëª¨ë“ˆ êµ¬ì¡°

```
estimatemanagement-info/
â”œâ”€â”€ controllers/                    # ì»¨íŠ¸ë¡¤ëŸ¬ (CRUD ë¶„ë¦¬)
â”‚   â”œâ”€â”€ estimatemanagement.create.controller.ts    # ê²¬ì  ìƒì„±
â”‚   â”œâ”€â”€ estimatemanagement.read.controller.ts      # ê²¬ì  ì¡°íšŒ
â”‚   â”œâ”€â”€ estimatemanagement.update.controller.ts    # ê²¬ì  ìˆ˜ì •
â”‚   â”œâ”€â”€ estimatemanagement.delete.controller.ts    # ê²¬ì  ì‚­ì œ
â”‚   â””â”€â”€ excel/                      # ì—‘ì…€ ê´€ë ¨ ì»¨íŠ¸ë¡¤ëŸ¬
â”‚       â””â”€â”€ estimatemanagement.excel.controller.ts
â”œâ”€â”€ services/                       # ì„œë¹„ìŠ¤ (ê¸°ëŠ¥ë³„ ë¶„ë¦¬)
â”‚   â”œâ”€â”€ estimatemanagement-create.service.ts       # ê²¬ì  ìƒì„± ë¡œì§
â”‚   â”œâ”€â”€ estimatemanagement-read.service.ts         # ê²¬ì  ì¡°íšŒ ë¡œì§
â”‚   â”œâ”€â”€ estimatemanagement-update.service.ts       # ê²¬ì  ìˆ˜ì • ë¡œì§
â”‚   â”œâ”€â”€ estimatemanagement-delete.service.ts       # ê²¬ì  ì‚­ì œ ë¡œì§
â”‚   â”œâ”€â”€ estimatemanagement-upload.service.ts       # ì—‘ì…€ ì—…ë¡œë“œ ë¡œì§
â”‚   â”œâ”€â”€ estimatemanagement-download.service.ts     # ì—‘ì…€ ë‹¤ìš´ë¡œë“œ ë¡œì§
â”‚   â””â”€â”€ estimatemanagement-template.service.ts     # í…œí”Œë¦¿ ìƒì„± ë¡œì§
â”œâ”€â”€ entities/                       # ë°ì´í„°ë² ì´ìŠ¤ ì—”í‹°í‹°
â”‚   â”œâ”€â”€ estimatemanagement.entity.ts               # ê²¬ì  ë©”ì¸ ì—”í‹°í‹°
â”‚   â””â”€â”€ estimate-detail.entity.ts                 # ê²¬ì  ì„¸ë¶€í’ˆëª© ì—”í‹°í‹°
â”œâ”€â”€ dto/                           # ë°ì´í„° ì „ì†¡ ê°ì²´
â”‚   â”œâ”€â”€ estimatemanagement-create.dto.ts           # ê²¬ì  ìƒì„± DTO
â”‚   â”œâ”€â”€ estimate-detail.dto.ts                    # ì„¸ë¶€í’ˆëª© DTO
â”‚   â””â”€â”€ delete-estimate.dto.ts                    # ê²¬ì  ì‚­ì œ DTO
â””â”€â”€ estimatemanagement.module.ts   # ëª¨ë“ˆ ì •ì˜
```

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### Backend
- **Framework**: NestJS
- **Database**: TypeORM + MySQL
- **Validation**: Class Validator
- **Documentation**: Swagger/OpenAPI
- **File Processing**: ExcelJS

### Dependencies
- **TypeORM**: ë°ì´í„°ë² ì´ìŠ¤ ORM
- **ExcelJS**: ì—‘ì…€ íŒŒì¼ ì²˜ë¦¬
- **Class Validator**: ë°ì´í„° ê²€ì¦
- **Swagger**: API ë¬¸ì„œí™”

## ğŸ“š API ì—”ë“œí¬ì¸íŠ¸

### ê²¬ì  ê´€ë¦¬

#### ê²¬ì  ìƒì„±
```http
POST /api/estimate-management/with-details
Content-Type: application/json
Authorization: Bearer <token>

{
  "estimate": {
    "estimateName": "2025ë…„ 1ë¶„ê¸° ìŠ¤ë§ˆíŠ¸í° ê²¬ì ",
    "estimateDate": "2025-08-25",
    "estimateVersion": 1,
    "customerCode": "CUST001",
    "customerName": "ì‚¼ì„±ì „ì",
    "projectCode": "PROJ001",
    "projectName": "ìŠ¤ë§ˆíŠ¸í° ê°œë°œ",
    "productCode": "PROD001",
    "productName": "ê°¤ëŸ­ì‹œ S25",
    "productQuantity": 1000,
    "estimateStatus": "ê²¬ì ì¤‘",
    "estimatePrice": 50000000,
    "employeeCode": "EMP001",
    "employeeName": "ê¹€ì² ìˆ˜",
    "estimateRemark": "ê¸´ê¸‰ ê²¬ì "
  },
  "estimateDetails": [
    {
      "itemCode": "ITEM001",
      "itemName": "CPU í”„ë¡œì„¸ì„œ",
      "itemSpecification": "Intel Core i7-12700K",
      "unit": "ê°œ",
      "quantity": 10.00,
      "unitPrice": 150000.00,
      "totalPrice": 1500000.00
    }
  ]
}
```

#### ê²¬ì  ì¡°íšŒ
```http
GET /api/estimate-management?customerCode=CUST001&estimateStatus=ê²¬ì ì¤‘&page=1&limit=10
Authorization: Bearer <token>
```

#### ê²¬ì  ìˆ˜ì •
```http
PUT /api/estimate-management/:id
Content-Type: application/json
Authorization: Bearer <token>

{
  "estimateName": "ìˆ˜ì •ëœ ê²¬ì ëª…",
  "estimateStatus": "ê²¬ì ì™„ë£Œ",
  "estimatePrice": 55000000
}
```

#### ê²¬ì  ì‚­ì œ
```http
DELETE /api/estimate-management/:id
Authorization: Bearer <token>
```

### ì„¸ë¶€í’ˆëª© ê´€ë¦¬

#### ì„¸ë¶€í’ˆëª© ì¶”ê°€
```http
POST /api/estimate-management/:id/details
Content-Type: application/json
Authorization: Bearer <token>

{
  "estimateDetails": [
    {
      "itemCode": "ITEM002",
      "itemName": "ë©”ëª¨ë¦¬",
      "itemSpecification": "DDR5 16GB",
      "unit": "ê°œ",
      "quantity": 20.00,
      "unitPrice": 80000.00,
      "totalPrice": 1600000.00
    }
  ]
}
```

### ì—‘ì…€ ì—°ë™

#### ê²¬ì  ì—…ë¡œë“œ
```http
POST /api/estimate-management/excel/upload
Content-Type: multipart/form-data
Authorization: Bearer <token>

file: [ì—‘ì…€ íŒŒì¼]
```

#### ê²¬ì  ë‹¤ìš´ë¡œë“œ
```http
GET /api/estimate-management/excel/download?customerCode=CUST001&startDate=2025-01-01&endDate=2025-12-31
Authorization: Bearer <token>
```

#### í…œí”Œë¦¿ ë‹¤ìš´ë¡œë“œ
```http
GET /api/estimate-management/excel/template
Authorization: Bearer <token>
```

## ğŸ“Š ë°ì´í„° êµ¬ì¡°

### EstimateManagement Entity
```typescript
{
  id: number;                    // ê²¬ì  ID (ìë™ ì¦ê°€)
  estimateCode: string;          // ê²¬ì  ì½”ë“œ (ìë™ ìƒì„±)
  estimateName: string;          // ê²¬ì ëª…
  estimateDate: Date;            // ê²¬ì  ë‚ ì§œ
  estimateVersion: number;       // ê²¬ì  ë²„ì „
  customerCode: string;          // ê³ ê° ì½”ë“œ
  customerName: string;          // ê³ ê°ëª…
  projectCode: string;           // í”„ë¡œì íŠ¸ ì½”ë“œ
  projectName: string;           // í”„ë¡œì íŠ¸ëª…
  productCode: string;           // ì œí’ˆ ì½”ë“œ
  productName: string;           // ì œí’ˆëª…
  productQuantity: number;       // ì œí’ˆ ìˆ˜ëŸ‰
  estimateStatus: string;        // ê²¬ì  ìƒíƒœ
  estimatePrice: number;         // ê²¬ì  ê°€ê²©
  employeeCode: string;          // ì§ì› ì½”ë“œ
  employeeName: string;          // ì§ì›ëª…
  estimateRemark?: string;       // ê²¬ì  ë¹„ê³ 
  ordermanagementCode?: string;  // ìˆ˜ì£¼ê´€ë¦¬ ì½”ë“œ
  termsOfPayment?: string;       // ê²°ì œ ì¡°ê±´
  estimateDetails: EstimateDetail[]; // ì„¸ë¶€í’ˆëª© ë°°ì—´
}
```

### EstimateDetail Entity
```typescript
{
  id: number;                    // ì„¸ë¶€í’ˆëª© ID
  estimateId: number;            // ê²¬ì  ID
  detailCode?: string;           // ì„¸ë¶€í’ˆëª© ì½”ë“œ
  itemCode: string;              // í’ˆëª© ì½”ë“œ
  itemName: string;              // í’ˆëª©ëª…
  itemSpecification?: string;    // í’ˆëª© ì‚¬ì–‘
  unit?: string;                 // ë‹¨ìœ„
  quantity: number;              // ìˆ˜ëŸ‰
  unitPrice: number;             // ë‹¨ê°€
  totalPrice: number;            // ì´ê°€ê²©
}
```

## ğŸ”„ ê²¬ì  ìƒíƒœ ê´€ë¦¬

### ìƒíƒœ íë¦„
```
ê²¬ì ì¤‘ â†’ ê²¬ì ì™„ë£Œ â†’ ìŠ¹ì¸ëŒ€ê¸° â†’ ìŠ¹ì¸ì™„ë£Œ
   â†“         â†“         â†“
  ê±°ì ˆ â†â”€â”€â”€â”€ ê±°ì ˆ â†â”€â”€â”€â”€ ê±°ì ˆ
```

### ìƒíƒœë³„ ì„¤ëª…
- **ê²¬ì ì¤‘**: ê²¬ì  ì‘ì„± ì¤‘
- **ê²¬ì ì™„ë£Œ**: ê²¬ì  ì‘ì„± ì™„ë£Œ
- **ìŠ¹ì¸ëŒ€ê¸°**: ê³ ê° ìŠ¹ì¸ ëŒ€ê¸° ì¤‘
- **ìŠ¹ì¸ì™„ë£Œ**: ê³ ê° ìŠ¹ì¸ ì™„ë£Œ
- **ê±°ì ˆ**: ê²¬ì  ê±°ì ˆ

## ğŸ“ ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™

### ê²¬ì  ì½”ë“œ ìƒì„±
- **í˜•ì‹**: `EST{YYYYMMDD}{XXXX}`
- **ì˜ˆì‹œ**: `EST20250825001`
- **ê·œì¹™**: ì¼ìë³„ ìˆœì°¨ ì¦ê°€

### ê²¬ì  ë²„ì „ ê´€ë¦¬
- **ì‹ ê·œ ê²¬ì **: ë²„ì „ 1ë¶€í„° ì‹œì‘
- **ê²¬ì  ìˆ˜ì •**: ê¸°ì¡´ ê²¬ì  ìˆ˜ì • ì‹œ ë²„ì „ ì¦ê°€
- **ê²¬ì  ë³µì‚¬**: ìƒˆ ê²¬ì  ì½”ë“œë¡œ ë²„ì „ 1ë¶€í„° ì‹œì‘

### ê°€ê²© ê³„ì‚°
- **ì„¸ë¶€í’ˆëª© ì´ê°€ê²©**: `ìˆ˜ëŸ‰ Ã— ë‹¨ê°€`
- **ê²¬ì  ì´ê°€ê²©**: ëª¨ë“  ì„¸ë¶€í’ˆëª© ì´ê°€ê²© í•©ê³„
- **ìë™ ê³„ì‚°**: ìˆ˜ëŸ‰ ë˜ëŠ” ë‹¨ê°€ ë³€ê²½ ì‹œ ìë™ ì¬ê³„ì‚°

### ê¶Œí•œ ê´€ë¦¬
- **ê²¬ì  ìƒì„±**: ëª¨ë“  ì§ì›
- **ê²¬ì  ìˆ˜ì •**: ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ì
- **ê²¬ì  ì‚­ì œ**: ê´€ë¦¬ìë§Œ ê°€ëŠ¥
- **ê²¬ì  ìŠ¹ì¸**: ê´€ë¦¬ìë§Œ ê°€ëŠ¥

## âš ï¸ ì£¼ì˜ì‚¬í•­

### ê²¬ì  ìƒì„± ì‹œ
- **ê²¬ì ëª…**: í•„ìˆ˜ ì…ë ¥, ìµœëŒ€ 100ì
- **ê³ ê° ì •ë³´**: ê³ ê° ì½”ë“œì™€ ê³ ê°ëª… ëª¨ë‘ í•„ìˆ˜
- **í”„ë¡œì íŠ¸ ì •ë³´**: í”„ë¡œì íŠ¸ ì½”ë“œì™€ í”„ë¡œì íŠ¸ëª… ëª¨ë‘ í•„ìˆ˜
- **ì œí’ˆ ì •ë³´**: ì œí’ˆ ì½”ë“œì™€ ì œí’ˆëª… ëª¨ë‘ í•„ìˆ˜
- **ê²¬ì  ìƒíƒœ**: ìœ íš¨í•œ ìƒíƒœê°’ë§Œ ì…ë ¥ ê°€ëŠ¥

### ê²¬ì  ìˆ˜ì • ì‹œ
- **ìŠ¹ì¸ì™„ë£Œ ìƒíƒœ**: ìˆ˜ì • ë¶ˆê°€
- **ê±°ì ˆ ìƒíƒœ**: ìˆ˜ì • ë¶ˆê°€
- **ë²„ì „ ê´€ë¦¬**: ìˆ˜ì • ì‹œ ë²„ì „ ìë™ ì¦ê°€

### ê²¬ì  ì‚­ì œ ì‹œ
- **ìŠ¹ì¸ì™„ë£Œ ìƒíƒœ**: ì‚­ì œ ë¶ˆê°€
- **ê´€ë ¨ ë°ì´í„°**: ì„¸ë¶€í’ˆëª©ë„ í•¨ê»˜ ì‚­ì œ
- **ë³µì› ê°€ëŠ¥**: ì‚­ì œëœ ê²¬ì ì€ ë³µì› ê°€ëŠ¥

### ì—‘ì…€ ì—…ë¡œë“œ ì‹œ
- **íŒŒì¼ í˜•ì‹**: .xlsx íŒŒì¼ë§Œ ì§€ì›
- **ë°ì´í„° ê²€ì¦**: ì—…ë¡œë“œ ì „ ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬
- **ì¤‘ë³µ ì²˜ë¦¬**: ê²¬ì  ì½”ë“œ ì¤‘ë³µ ì‹œ ì˜¤ë¥˜ ë°œìƒ
- **í…œí”Œë¦¿ ì‚¬ìš©**: ì œê³µëœ í…œí”Œë¦¿ ì‚¬ìš© ê¶Œì¥

## ğŸ”§ ê°œë°œ ê°€ì´ë“œ

### ìƒˆë¡œìš´ ê²¬ì  ìƒíƒœ ì¶”ê°€
1. `EstimateManagement` ì—”í‹°í‹°ì˜ `estimateStatus` ì»¬ëŸ¼ í™•ì¸
2. DTOì˜ `@IsIn` ë°ì½”ë ˆì´í„°ì— ìƒˆ ìƒíƒœ ì¶”ê°€
3. ì„œë¹„ìŠ¤ ë¡œì§ì—ì„œ ìƒˆ ìƒíƒœ ì²˜ë¦¬ ì¶”ê°€

### ìƒˆë¡œìš´ ê²€ìƒ‰ í•„í„° ì¶”ê°€
1. `SearchEstimateDto`ì— ìƒˆ í•„ë“œ ì¶”ê°€
2. ì„œë¹„ìŠ¤ì˜ ê²€ìƒ‰ ë¡œì§ì— ìƒˆ í•„í„° ì ìš©
3. ì»¨íŠ¸ë¡¤ëŸ¬ì˜ Swagger ë¬¸ì„œ ì—…ë°ì´íŠ¸

### ì—‘ì…€ í…œí”Œë¦¿ ìˆ˜ì •
1. `EstimateTemplateService`ì˜ `generateTemplate` ë©”ì„œë“œ ìˆ˜ì •
2. ì»¬ëŸ¼ í—¤ë” ë° ì˜ˆì‹œ ë°ì´í„° ì—…ë°ì´íŠ¸
3. ì—…ë¡œë“œ ì„œë¹„ìŠ¤ì˜ íŒŒì‹± ë¡œì§ë„ í•¨ê»˜ ìˆ˜ì •

## ğŸ“ ì§€ì›

ê²¬ì ê´€ë¦¬ ëª¨ë“ˆì— ëŒ€í•œ ì§ˆë¬¸ì´ë‚˜ ì´ìŠˆê°€ ìˆìœ¼ì‹œë©´:

- ğŸ“§ ì´ë©”ì¼: [ê°œë°œíŒ€ ì´ë©”ì¼]
- ğŸ› ì´ìŠˆ: [GitHub Issues]
- ğŸ“– ë¬¸ì„œ: [API Documentation](http://localhost:5000/api)

---

<div align="center">

**Made with â¤ï¸ using NestJS**

</div>
